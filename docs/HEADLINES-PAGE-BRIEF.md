# Headlines Page – Feature Brief

**Document purpose:** Handoff brief for implementing the “Headlines” page as one feature of a larger mobile app. Use this in another Cursor project or with another developer to build the same behaviour and UX.

**Version:** 1.1  
**Last updated:** February 2026

---

## 1. Overview

### 1.1 What it is

A single **app page/screen** that shows the **latest headlines** from a fixed set of motorcycle and racing news websites. Each headline is **tappable** and opens the **full article in the browser** (in-app browser or system browser). The list **updates when the user opens or returns to the page** (e.g. app launch or navigating back to this screen). Users can also **manually refresh** (e.g. pull-to-refresh) to get fresh headlines.

### 1.2 Role in the app

This is **one feature** of a larger app (e.g. a “RoadRace” or motorsport/motorcycle app). Other features (e.g. calendar, results, favourites, settings) are out of scope for this brief. The Headlines page should plug into the app’s existing navigation (e.g. tab or stack) and styling where applicable.

---

## 2. Data sources (sites to aggregate)

The page must aggregate headlines from these **eight sources**. Each item shown must have: **title**, **link (URL)** to the article, and **source name** (for display). Date is optional but desirable if easy to obtain.

| # | Source name (display) | Site / URL to scrape |
|---|------------------------|----------------------|
| 1 | AMCN | https://amcn.com.au/ |
| 2 | MCN | https://www.motorcyclenews.com/news/ |
| 3 | Motor Sport | https://www.motorsportmagazine.com/ |
| 4 | Motor Sport MotoGP | https://www.motorsportmagazine.com/articles/category/motorcycles/motogp/ |
| 5 | Bennetts BikeSocial | https://www.bennetts.co.uk/bikesocial/news-and-views |
| 6 | ASBK | https://www.asbk.com.au/all/news/ |
| 7 | WorldSBK | https://www.worldsbk.com/en/news |
| 8 | MotoGP | https://www.motogp.com/en/news |

- Headlines are obtained by **scraping or parsing** these pages (or their RSS/feeds if available). Scraping must be **server-side** (backend/API), not from the mobile client, to avoid CORS and to keep one place to update if a site’s HTML changes.
- The list shown to the user should be **combined** from all sources (e.g. single list, optionally sorted or grouped by source). Deduplication by URL is recommended.
- Each source must have a **stable ID** (e.g. `motogp`, `amcn`, `worldsbk`) for priority ordering and settings. See Section 2.1 and 2.2.

### 2.1 Source IDs (for priority and API)

For built-in sources, use a consistent **source ID** in addition to the display name, e.g.:

| Source ID   | Display name          |
|------------|------------------------|
| amcn       | AMCN                   |
| mcn        | MCN                    |
| motor_sport| Motor Sport            |
| motor_sport_motogp | Motor Sport MotoGP |
| bennetts   | Bennetts BikeSocial    |
| asbk       | ASBK                   |
| worldsbk   | WorldSBK               |
| motogp     | MotoGP                 |

Custom sources added by the user get an ID generated by the app (e.g. `custom_1`, or the slug of the name).

### 2.2 Custom sources (user-added)

- The user can **add a source of their own** (e.g. a blog, another news site, or an RSS feed).
- **Required input:** a **URL** and a **display name**. The backend may support:
  - **RSS/Atom feed URL:** preferred; fetch and parse the feed, return items as headlines (title, link, source = display name).
  - **Scrape a single URL:** optional; if the backend supports scraping an arbitrary page, the user can add any URL and the backend attempts to extract headline-like links (with higher risk of breakage if the site changes).
- User-added sources are stored **per device** (or per account if the app has auth). The API can accept a list of custom sources per request and return headlines from those URLs in addition to built-in sources.
- The user can **remove** a custom source from settings (no longer sent to the API or included in the list).

---

## 3. Priority order (numbered list for displayed content)

- The user can define a **numbered priority** for how headlines are ordered on the Headlines page.
- **Priority 1** = show first (e.g. user always wants MotoGP content at the top), **2** = second, and so on.
- Headlines from the same source stay together in blocks ordered by this priority (e.g. all MotoGP, then all WorldSBK, then all AMCN). Within each source block, order can be by date (newest first) or by the order returned by the API.
- **Default:** if the user has not set a priority order, use a sensible default (e.g. the order in Section 2 table, or alphabetically by source name).
- Priority is stored **per device** (or per account if the app has auth) and applied in the app when rendering the list (API can optionally accept priority and return pre-sorted list).

---

## 4. Settings: Headlines source priority and custom sources

- Provide a **Settings** (or **Headlines settings**) area for:
  1. **Priority grid** – controls which source appears first, second, third, etc.
  2. **Add / remove custom source.**

### 4.1 Priority grid

- A **priority grid** (or list) where each **row** is a **priority position** (1, 2, 3, … up to the number of sources).
- Each row contains:
  - A **label** for the rank (e.g. `1`, `2`, `3`, or “First”, “Second”, …).
  - A **dropdown (picker)** to select **which source** is at that position. The dropdown lists all available sources (built-in + user-added). Each source appears in at most one priority slot.
- **Behaviour:**
  - When the user selects “MotoGP” for position 1, MotoGP headlines appear first on the Headlines page.
  - Changing the dropdown updates the stored priority and the Headlines page list re-sorts accordingly (after next load or immediately if data is already in memory).
- **Unassigned sources:** Sources not assigned to any slot can appear after all prioritised sources (e.g. in alphabetical order), or the UI can require that every source is assigned to exactly one slot (no gaps).

### 4.2 Add custom source

- A control (e.g. “Add source” button) that opens a **form** or **modal** with:
  - **URL** (required): text input for the feed or page URL (e.g. `https://example.com/feed.xml` or `https://example.com/news`).
  - **Display name** (required): text input (e.g. “My Blog”).
- On submit, the app sends this to the API (if the API supports custom sources) and/or stores it locally. New headlines from this source are then included when fetching and appear in the priority grid dropdown. The user can assign it a priority like any other source.
- **Remove:** In settings, each custom source should have a way to **remove** it (e.g. delete/swipe). Built-in sources cannot be removed, only reordered.

### 4.3 Notifications for Priority 1 news

- The app may offer an **option** (e.g. in Headlines settings) to **send notifications for Priority 1 news**.
- When this option is **on**:
  - The app requests notification permission (if not already granted) when the user enables the option.
  - Whenever headlines are fetched (e.g. when the user opens the Headlines page or pulls to refresh), the app compares the **Priority 1 source’s** current headlines with the last-seen set (e.g. stored URLs). If there are **new** headlines from that source, the app shows a **local notification** (e.g. “New [Source name] headlines” / “3 new articles”). The app then updates the stored “last seen” set so the same items are not notified again.
- When the option is **off**, no notifications are sent.
- **Implementation note:** Notifications are typically **local** (triggered after a fetch when the app runs). True push (e.g. when the app is closed) would require a backend to detect new content and send push messages; that can be out of scope or a future enhancement.

---

## 5. Functional requirements

### 5.1 When the list is loaded

- **On “open”:** When the user opens the app or navigates to the Headlines page, the app **must request** the latest headlines from the backend and display them. No requirement to show stale data first; a loading state is acceptable.
- **Stale-while-revalidate (optional):** If the app already has a cached list, it may show that immediately and then refresh in the background; otherwise, “load on open” means at least one fetch when the page gains focus.

### 5.2 Display

- Show a **list** of headlines. Each row/card must include:
  - **Title** (article headline).
  - **Source** (e.g. “AMCN”, “MotoGP”, “WorldSBK”) so users know where the article is from.
- **Tap behaviour:** Tapping a headline **opens the article URL** in the browser (in-app WebView or system browser). No requirement to show the article inside the app; opening the link is sufficient.

### 5.3 Refresh

- Provide a **manual refresh** (e.g. **pull-to-refresh**) that fetches the latest headlines again (and ideally asks the backend to bypass cache if the backend has one). After refresh, the list should update with the new data.

### 5.4 Errors and loading

- **Loading:** Show a clear loading state (e.g. spinner/skeleton) while the first load or refresh is in progress.
- **Error:** If the request fails (network error, server error), show an error message and a way to **retry** (e.g. “Retry” button or “Pull to retry”).
- **Empty:** If the backend returns no headlines, show an empty state (e.g. “No headlines right now” or “Try again later”).

---

## 6. Technical approach

### 6.1 Architecture (recommended)

- **Backend (API):** A small service that:
  - Fetches and parses the listed websites (server-side).
  - Returns a **single JSON payload** of headlines (title, url, source, optional date).
  - Should **cache** results (e.g. 10–15 minutes) to avoid hammering the sites and to keep response times acceptable. Support a way to **bypass cache** for pull-to-refresh (e.g. query param `?refresh=1`).
- **Mobile app:** One screen that:
  - On focus (e.g. `useFocusEffect` in React Navigation, or equivalent “screen visible” / “app opened” logic), calls the API and updates the list.
  - Renders the list; each item is tappable and opens `item.url` via the platform’s “open URL” / “open in browser” API.
  - Implements pull-to-refresh by calling the API again (with cache bypass if supported).

The mobile client **must not** scrape the websites directly (CORS, consistency, and maintenance are better handled on the server).

### 6.2 API contract (backend)

The backend should expose at least one endpoint used by the Headlines page.

**Endpoint (example):** `GET /headlines`

**Query parameters (optional):**

- `refresh=1` – when present, backend should bypass cache and re-fetch from the sources (for pull-to-refresh).

**Success response (200):**

```json
{
  "headlines": [
    {
      "title": "Article headline text",
      "url": "https://example.com/article-path",
      "source": "AMCN",
      "sourceId": "amcn",
      "date": "2026-02-22"
    }
  ],
  "count": 42
}
```

- `headlines`: array of objects; each has `title` (string), `url` (string), `source` (display name, string), `sourceId` (stable ID for priority, string), and optionally `date` (string, e.g. ISO date or null).
- `count`: number of items in `headlines` (optional but useful).

**Endpoint (example):** `GET /sources`

Returns the list of built-in sources so the app can build the priority grid dropdown.

**Success response (200):**

```json
{
  "sources": [
    { "id": "motogp", "name": "MotoGP" },
    { "id": "worldsbk", "name": "WorldSBK" },
    { "id": "amcn", "name": "AMCN" }
  ]
}
```

**Endpoint (example):** `POST /headlines/custom` (or custom sources passed in another way)

**Request body:** `{ "customSources": [ { "url": "https://example.com/feed.xml", "name": "My Blog" } ] }`

- Backend fetches each URL (e.g. as RSS/Atom) and returns headlines with `source` = name and `sourceId` = a stable id (e.g. `custom_1` or a slug of the name). Response shape same as `GET /headlines` (headlines array). The app merges these with the result of `GET /headlines` and sorts by user priority.

**Error response (e.g. 500):**  
Return a JSON body (e.g. `{ "error": "..." }`) or at least a non-2xx status so the app can show the error/retry state.

**CORS:** If the app is a web app or uses a different origin, the API must allow the app’s origin (CORS).

### 6.3 App-side behaviour (summary)

- **Screen focus / app open:** Trigger a request to `GET /headlines` (and optionally `GET /headlines?refresh=1` on manual refresh).
- **Render:** List of items; each item shows `title` and `source`; tap opens `url` in browser.
- **Loading:** Show loading UI until first response (and optionally during refresh).
- **Error:** Show error message + retry.
- **Empty:** Show empty state when `headlines` is empty or missing.

---

## 7. UI/UX guidelines (non-prescriptive)

- **List:** Simple, scannable list (e.g. cards or rows). Source label should be visible (e.g. small label or subtitle).
- **Links:** Every headline must be tappable and open the article URL; no requirement for in-app reading.
- **Refresh:** Pull-to-refresh is the preferred pattern; alternatively a refresh button.
- **Theme:** Can follow the rest of the app (e.g. dark theme with accent colour). No specific design system is mandated; the brief only requires behaviour and data.

---

## 8. Configuration and deployment

- **API base URL:** The app must be configurable (e.g. config file, env, or build-time constant) so that:
  - In development, it can point to `http://localhost:PORT` or the developer machine’s LAN IP (e.g. `http://192.168.1.x:3001`) when testing on a physical device.
  - In production, it points to the deployed API URL.
- **Backend:** Can be implemented in any stack (Node/Express, serverless, Python, etc.) as long as it respects the API contract and runs reliably (e.g. on Vercel, Railway, Render, or a VPS).

---

## 9. Out of scope for this brief

- Other app features (calendar, results, user accounts, etc.).
- Authentication or personalised feeds for the Headlines page.
- Storing/reading articles offline.
- Push notifications for new headlines.
- Exact visual design or design system (only behaviour and data are specified).

---

## 10. Acceptance criteria (checklist)

- [ ] Headlines are loaded from a backend that aggregates the eight listed sources.
- [ ] List shows title and source for each headline; tapping opens the article URL in the browser.
- [ ] When the user opens the app or navigates to the Headlines page, the list is refreshed (at least one fetch on focus).
- [ ] Pull-to-refresh (or equivalent) triggers a new fetch and updates the list; backend supports cache bypass for this.
- [ ] Loading and error states are shown; user can retry after an error.
- [ ] API base URL is configurable for dev and production.
- [ ] **Priority:** Settings (or Headlines settings) includes a priority grid: each row has a number (1, 2, 3, …) and a dropdown to select which source is at that position. Headlines on the Headlines page are ordered by this priority (e.g. MotoGP first if set to 1).
- [ ] **Custom source:** User can add a source (URL + display name). Headlines from that source appear in the list and the source appears in the priority grid dropdown. User can remove a custom source.
- [ ] **Notify for Priority 1:** User can enable an option to send notifications for new Priority 1 news. When enabled and new headlines from the Priority 1 source are detected (on fetch), a local notification is shown (e.g. “New MotoGP headlines – 2 new articles”). Permission is requested when the user turns the option on.

---

## 11. Reference implementation (optional)

A reference implementation exists in the **RoadRace** project:

- **Backend:** `api/server.js` (Express), `api/scrapers.js` (per-site scrapers with `sourceId`, 15-min cache). `GET /sources` returns built-in sources; `POST /headlines/custom` accepts `{ customSources: [{ url, name, id? }] }` and returns headlines from RSS feeds.
- **App:** Expo (React Native). Headlines screen fetches `GET /headlines` and (if any) `POST /headlines/custom`, merges results, and sorts by user-defined priority from storage; when “Notify for Priority 1” is on, after fetch it compares Priority 1 headlines with last-seen URLs and shows a local notification if there are new items (expo-notifications). Headlines settings screen: “Notify for Priority 1 news” toggle (requests permission when turned on), priority grid (tap to open modal picker per position), add custom source (URL + name), remove custom source. Priority, custom sources, and notify preference are stored in AsyncStorage; last-seen Priority 1 URLs are stored for notification deduplication.

This brief is implementation-agnostic; the reference can be used to clarify behaviour or API shape but is not required for the other project.
